#book-refactoring

## 第2章 リファクタリングの原則

### リファクタリングの定義

- 名詞
  - 外部から見たときの振る舞いを保ちつつ、理解や修正が簡単になるように、ソフトウェアの内部構造を変化させること
- 動詞
  - 一連のリファクタリングを適用して、外部から見た振る舞いの変更なしに、ソフトウェアを再構築すること
- あくまでソフトウェアを理解しやすく、変更を容易にするために行う
- ソフトウェアの外的振る舞いを保つことで、変更があったことに気づかない

#### 2つの帽子

- 機能追加とリファクタリングを区別する
- 常にどちらの帽子をかぶっているのか意識する

### リファクタリングを行う理由

- 設計の改善
- ソフトウェアが理解しやすくなる
- バグを見つけ出す
  - KentBeck「偉大なプログラマではなく、偉大な習慣を身に付けたプログラマ」
- より速くプログラミングできる
  - ラピッドな開発には優れた設計が不可欠である

### いつリファクタリングをすべきか

- 時間を設けて行うようなものではない
- 作業の中で要求が自然に発生するもの
- 3度目の法則
  - 3度目に似たようなことをしていると気付いたら
- 機能追加の時に行う
  - リファクタリングで機能追加を容易にする
- バグフィックスの時に行う
  - コードを理解するため
  - バグレポートをリファクタリングが必要な兆候とも考えられる
- コードレビューの時に行う
  - アイデアの結果を「実際に見る」ことができる
  - 少人数で行うべき
    - XPにおけるペアプロ
